var count=0;
var brandUrl="";
var sortBrandMetaName=document.querySelector(".allBrands").getAttribute("data-sortname");
var sortBrandMetaOrder="";
var brand_gsaCategory="";
var num=parseInt(document.querySelector(".brand-results").getAttribute("data-num"),10);
var numtoLoad=2;
if($(window).width()>575){numtoLoad=3
}if(sortBrandMetaName!=""){sortBrandMetaOrder=document.querySelector(".allBrands").getAttribute("data-sortorder")
}var lucidUrl=document.querySelector(".brand-results-list").getAttribute("data-url");
var brand_gsaCategoryArray="";
var meta=document.getElementsByTagName("meta");
for(var i=0;
i<meta.length;
i++){if(meta[i].name=="gsaCategory"){brand_gsaCategoryArray=meta[i].content.split(",");
for(var j=0;
j<brand_gsaCategoryArray.length;
j++){brand_gsaCategory=brand_gsaCategory+"filter-gsaCategory="+encodeURIComponent(brand_gsaCategoryArray[j])+"&"
}}}document.addEventListener("DOMContentLoaded",function domchange(b){var a=lucidServiceCall(lucidUrl,"",num,start);
brandUrl=updateRawUrl(a,sortBrandMetaName,sortBrandMetaOrder);
ajaxCall(brandUrl)
});
if(document.querySelector("#filter-check")!=undefined){document.querySelector("#filter-check").addEventListener("change",function filterCheck(b){var c=0;
removePreviousResults("brand-results-list");
var a=lucidServiceCall(lucidUrl,"",num,c);
brandUrl=updateRawUrl(a,sortBrandMetaName,sortBrandMetaOrder);
ajaxCall(brandUrl)
});
$("#filter-check").on("click keypress",function filterCheck(b){if(b.target.hasAttribute("class")&&b.target.classList.contains("filter-minus-span")){var c=0;
removePreviousResults("brand-results-list");
var a=lucidServiceCall(lucidUrl,"",num,c);
brandUrl=updateRawUrl(a,sortBrandMetaName,sortBrandMetaOrder);
ajaxCall(brandUrl)
}})
}function readJSON(e){if((e.errorMessage=="")&(e.totalResults>0)){totalResults=e.totalResults;
sessionStorage.setItem("totalResults",totalResults);
var m=e.items;
for(i=0;
i<Object.keys(m).length;
i++){var a=document.querySelector(".brand-results-list");
var c=document.createElement("li");
c.setAttribute("class","brand-results-item moreBox");
var f=document.createElement("div");
f.setAttribute("class","brandIcon");
c.appendChild(f);
a.appendChild(c);
var b=document.createElement("a");
b.setAttribute("href",m[i]["url"]);
var o=document.createElement("img");
o.setAttribute("src",m[i]["metas"]["gsaImage"]);
o.setAttribute("alt",m[i]["metas"]["gsaPageType"]+"-"+m[i]["metas"]["gsaName"]);
o.setAttribute("title",m[i]["title"]);
b.appendChild(o);
f.appendChild(b);
var n=document.createElement("span");
n.setAttribute("class","brandHeading P1-txt");
var g=document.createElement("a");
g.setAttribute("tabindex","0");
g.setAttribute("href",m[i]["url"]);
g.innerHTML=m[i]["metas"]["gsaName"];
n.appendChild(g);
var l=document.createElement("span");
l.setAttribute("class","brandHeading cta_primary");
var d=document.createElement("a");
d.setAttribute("href",m[i]["url"]);
d.innerHTML=document.querySelector(".allBrands").getAttribute("data-cta-text");
l.appendChild(d);
var h="";
if(document.querySelector(".allBrands")){var h=document.querySelector(".allBrands").getAttribute("data-display")
}if(h=="true"){c.appendChild(n)
}else{c.appendChild(l)
}}if(e.totalResults<=num||start>=(totalResults-numtoLoad)){document.querySelector(".brandlist.pagi-loadmore").style.display="none";
start=0
}else{document.querySelector(".brandlist.pagi-loadmore").style.display="block"
}}else{if(e.totalResults==0){var k="No results found ";
var a=document.querySelector(".brand-results-list");
var c=document.createElement("li");
c.setAttribute("class","no-results");
var f=document.createElement("h3");
f.innerHTML=k;
c.appendChild(f);
a.appendChild(c);
document.querySelector(".brandlist.pagi-loadmore").style.display="none"
}}}$(".brandlist .loadmoreComp").on("click keypress",function(b){if(count==0){start=start+num;
count++
}else{start=start+numtoLoad;
count++
}var a=lucidServiceCall(lucidUrl,"",numtoLoad,start);
brandUrl=updateRawUrl(a,sortBrandMetaName,sortBrandMetaOrder);
ajaxCall(brandUrl);
if(start>=(totalResults-numtoLoad)){document.querySelector(".brandlist.pagi-loadmore").style.display="none";
count=0
}});
function ajaxCall(a){$.ajax({url:brandUrl,type:"GET",dataType:"jsonp"}).done(function(b){console.log("success :",b);
readJSON(b);
brandUrl=""
}).fail(function(d,b,c){console.log("request:");
console.log(d);
console.log("status: ");
console.log(b);
console.log("error: ");
console.log(c)
})
}function updateRawUrl(b,a,c){if(typeof filter_gsaCategory!=="undefined"&&filter_gsaCategory!=""){return b+filter_gsaCategory+"sortmetaname="+a+"&sortmetaorder="+c
}else{if(brand_gsaCategory!=""){return b+brand_gsaCategory+"sortmetaname="+a+"&sortmetaorder="+c
}else{return b+"sortmetaname="+a+"&sortmetaorder="+c
}}};